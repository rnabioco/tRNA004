Sender: LSF System <lsfadmin@compute10>
Subject: Job 857915: <count_bam_reads> in cluster <tesla2> Done

Job <count_bam_reads> was submitted from host <compute19> by user <whitel> in cluster <tesla2> at Sun Jun  9 15:01:29 2024
Job was executed on host(s) <compute10>, in queue <rna>, as user <whitel> in cluster <tesla2> at Sun Jun  9 15:01:37 2024
</beevol/home/whitel> was used as the home directory.
</beevol/home/whitel/tRNAworkshop/src> was used as the working directory.
Started at Sun Jun  9 15:01:37 2024
Terminated at Sun Jun  9 15:02:33 2024
Results reported at Sun Jun  9 15:02:33 2024

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash
#BSUB -J count_bam_reads
#BSUB -o count_bam_reads_out.%J
#BSUB -e count_bam_reads_err.%J
#BSUB -n 1
#BSUB -q rna

# Output file
output_file="bam_read_counts.txt"

# Output location
outloc="/beevol/home/whitel/tRNAworkshop/metadata"

# Ensure the output directory exists
mkdir -p "$outloc"

# Header for the output file
echo -e "Filename\tTotal Reads" > "$outloc/$output_file"

# Directory containing your BAM files
bam_dir="/beevol/home/whitel/tRNAworkshop/rebasecalled/alignedbams/allreads"

# Loop through each BAM file in the directory
for bam_file in "$bam_dir"/*.bam; do
    if [ ! -f "$bam_file" ]; then
        echo "Skipping, not a file: $bam_file"
        continue
    fi
    
    # Extract filename without path
    filename=$(basename "$bam_file")
    
    # Count the number of reads in the BAM file
    total_reads=$(samtools view -c "$bam_file")
    
    # Append the filename and total reads to the output file
    echo -e "$filename\t$total_reads" >> "$outloc/$output_file"
done


------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   35.59 sec.
    Max Memory :                                 -
    Average Memory :                             -
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   -
    Max Processes :                              4
    Max Threads :                                5
    Run time :                                   56 sec.
    Turnaround time :                            68 sec.

The output (if any) follows:



PS:

Read file <count_bam_reads_err.857915> for stderr output of this job.

